# ================================================
# PERFIL PRODUCCIÓN - CLOUD RUN
# ================================================

spring.application.name=political_referrals_wa

# Puerto dinámico para Cloud Run
server.port=${PORT:8080}

# Google Cloud Project ID (se configura via variable de entorno)
spring.cloud.gcp.project-id=${SPRING_CLOUD_GCP_PROJECT_ID:intreasoft-daniel}

# Credenciales via variables de entorno (valores reales para testing local)
webhook.verify-token=${WEBHOOK_VERIFY_TOKEN:qaRZjTs8tFTfo5pLt6JwyFtGFPtuxLF6JBYqu0YcXsQ}
telegram.bot.token=${TELEGRAM_BOT_TOKEN:7350149841:AAHsujWqzvh9azw2dMlwby6iZdlEkmisSv4}
telegram.bot.username=${TELEGRAM_BOT_USERNAME:ResetPoliticaBot}
wati.api.tenant-id=${WATI_TENANT_ID:473173}
wati.api.token=${WATI_API_TOKEN:eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI5ZWViNzJlZi01NmVmLTQzZjUtYjBmOC00NWFjZTVjZjBiZjgiLCJ1bmlxdWVfbmFtZSI6ImludHJhc29mdGRldm9wc0BnbWFpbC5jb20iLCJuYW1laWQiOiJpbnRyYXNvZnRkZXZvcHNAZ21haWwuY29tIiwiZW1haWwiOiJpbnRyYXNvZnRkZXZvcHNAZ21haWwuY29tIiwiYXV0aF90aW1lIjoiMDcvMjUvMjAyNSAyMzo0MzowOSIsInRlbmFudF9pZCI6IjQ3MzE3MyIsImRiX25hbWUiOiJtdC1wcm9kLVRlbmFudHMiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBRE1JTklTVFJBVE9SIiwiZXhwIjoyNTM0MDIzMDA4MDAsImlzcyI6IkNsYXJlX0FJIiwiYXVkIjoiQ2xhcmVfQUkifQ._mgHJCUNWWmdVueTQmoEAEtaIZS9uTkOwh28UffXFDg}
gemini.api.key=${GEMINI_API_KEY:AIzaSyA73v4PVS8kaID6TWQcW-F31qPk2BiBNHo}
analytics.jwt.secret=${ANALYTICS_JWT_SECRET:z4PiqjH5bJEUTcDLz4q//FX4MZXvrN7vQi+38KK5r1g=}

# URLs de servicios para producción
wati.api.endpoint.base=https://live-mt-server.wati.io:443
ai.bot.endpoint=${AI_BOT_ENDPOINT:https://chatbotia-331919709696.us-east1.run.app}
gemini.api.url=https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent
chatbot.ia.url=${CHATBOT_IA_URL:https://chatbotia-331919709696.us-east1.run.app}
analytics.endpoint.url=${ANALYTICS_ENDPOINT_URL:https://user-referrals-api-331919709696.us-central1.run.app}
welcome.video.url=${WELCOME_VIDEO_URL:https://storage.googleapis.com/intrasoft-reset-politica/WhatsApp%20Video%202025-08-01%20at%2013.mp4}

# Configuración de Actuator para producción (solo health e info)
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always
management.health.defaults.enabled=true
management.endpoints.web.base-path=/actuator

# Configuración de Tomcat optimizada para Cloud Run
spring.main.web-application-type=servlet
server.tomcat.threads.max=200
server.tomcat.threads.min-spare=10
server.tomcat.connection-timeout=20000
server.tomcat.max-connections=8192
server.tomcat.accept-count=100

# Logging optimizado para producción
logging.level.com.politicalreferralswa=INFO
logging.level.org.springframework.web=INFO
logging.level.org.springframework.boot=INFO
logging.level.org.springframework.boot.web.embedded.tomcat=INFO
logging.level.org.apache.tomcat=INFO

# Configuración de Swagger/OpenAPI para producción
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.doc-expansion=list
springdoc.swagger-ui.try-it-out-enabled=false
springdoc.swagger-ui.filter=true

# Configuración de notificaciones WhatsApp para producción
wati.notification.enabled=${WATI_NOTIFICATION_ENABLED:true}
wati.notification.group.id=${WATI_NOTIFICATION_GROUP_ID:}
wati.notification.phones=${WATI_NOTIFICATION_PHONES:573227281752}

# Configuraciones específicas para producción
spring.main.banner-mode=off
spring.main.lazy-initialization=false
java.net.preferIPv4Stack=true

# Configuración de JWT para analytics
analytics.jwt.expiration.minutes=60

# ================================================
# VARIABLES ADICIONALES REQUERIDAS
# ================================================

# Configuración de Firebase (Cloud Run nativo)
spring.cloud.gcp.firestore.enabled=false
spring.cloud.gcp.firestore.project-id=${SPRING_CLOUD_GCP_PROJECT_ID:intreasoft-daniel}

# Configuración de credenciales de Firebase (Cloud Run usa service account)
# spring.cloud.gcp.credentials.location se deja vacío para usar service account por defecto

# Configuración de timeout para APIs externas
spring.mvc.async.request-timeout=30000
server.tomcat.connection-timeout=20000

# Configuración de health checks más robustos
management.health.defaults.enabled=true
management.health.livenessstate.enabled=true
management.health.readinessstate.enabled=true

# Configuración de métricas (opcional para producción)
management.metrics.export.simple.enabled=false
management.metrics.export.prometheus.enabled=false
